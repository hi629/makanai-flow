# 仕様書：冷蔵庫×スーパー起点 生活オペレーションAI献立アプリ

## 1. プロダクト概要

本アプリは、**海外生活を前提に「冷蔵庫の中身」と「これから行くスーパー」**を起点として、
**今日〜数日を無理なく回すための食事案・簡易作り方・最小限の買い物提案**を行うAIアプリである。

- 献立アプリではない
- レシピアプリでもない
- 習慣化・健康管理を目的としない

**目的：食生活を“計画する”のではなく、“成立させる”こと**

---

## 2. 想定ユーザー

- 海外在住者（母国を問わない：ノマド・駐在・留学生・移住者）
- 現地スーパーで何を買えばよいか迷う人
- 冷蔵庫の食材を無駄なく使いたい人
- 現地料理と「自分が慣れ親しんだ国の料理」を、状況に応じて使い分けたい人

※ 料理上級者・写真映え重視層は非ターゲット

---

## 3. 基本コンセプト（非交渉原則）

1. **起点は常に「食材」**（人の目標・健康ではない）
2. **時間軸は「今日〜数日」**（1週間献立は作らない）
3. **料理ジャンルは結果であり、選ばせない**（よく作る国の料理は初期アンケートで設定し、内部制約として保持）
4. **完璧さより成立・回転を優先**
5. **レシピ写真・映え要素は排除**

---

## 4. 機能全体構成

### 4.0 初期アンケート（初回起動時）

初回起動時に、ユーザーに以下の簡易アンケートを実施する。

**Q. よく作る（食べたい）国の料理は？**
- 国旗アイコンを用いた複数選択（1〜3カ国推奨）
- 例：🇯🇵 日本 / 🇮🇹 イタリア / 🇫🇷 フランス / 🇮🇳 インド / 🇲🇽 メキシコ など

**保存内容（ローカルDB）**
- `preferred_cuisines`: ["JP", "IT", "FR" など]

※ UI上では「母国」という言葉は使用しない
※ あくまで『慣れている味の方向性』として扱う

---

### 4.1 メインフロー

1. 起点選択
   - 🧊 冷蔵庫（今あるもの）
   - 🛒 スーパー（これから買う）

2. 食材入力
   - チェックリスト入力（MVP）
   - 写真入力（補助・後続機能）

3. 状態入力（最小限）
   - 作る気力：低 / 普通 / 高
   - モード制約：
     - 現地料理OK
     - 慣れた国の料理もOK（初期アンケートで選択した国）
     - どちらでもOK（デフォルト）

4. AI提案
   - 今日〜明日の食事案 2〜3件
   - 各案に以下を含む
     - 使用食材
     - 不足食材（最小）
     - 超簡易作り方（5行以内）
     - 回復度 / 手間レベル

---

## 5. 機能詳細

### 5.1 冷蔵庫管理（ローカルDB）

**保存項目**
- 食材名
- 購入日
- 優先度（赤 / 黄 / 緑）※AIが自動推定
- よく使う食材フラグ

※ 正確な賞味期限管理は行わない

---

### 5.2 スーパー起点モード

- 位置情報（GPS）から現在地の国・都市を取得
- 現地で一般的なスーパー購買を前提にAIが構成を提案
- これから買う前提で食材を選択
- AIは「このエリアのスーパーで揃えやすい」構成を優先
- 買い物リストは**不足分のみ**生成（現地言語併記可）

---

### 5.3 AI献立生成仕様

**入力情報（例）**
```json
{
  "country": "Georgia", // 位置情報から自動取得（手動変更可）
  "mode": "fridge",
  "ingredients": ["chicken", "onion", "yogurt"],
  "effort": "low",
  "constraints": {
    "local_ok": true,
    "preferred_cuisines": ["JP", "IT"],
    "comfort_priority": "medium"
  }
}
```

**出力内容**
- 食事案タイトル（抽象的でOK）
- 使用食材
- 不足食材
- 作り方（5行以内）
- 失敗しにくいポイント

---

## 6. UI/UX設計方針

### 6.1 画面構成（最小）

0. 初期アンケート画面（国旗選択）

1. 起点選択画面
2. 食事提案画面
3. 冷蔵庫管理画面
4. 設定画面（国・言語のみ）

---

### 6.2 UI原則

- 写真なし
- 選択肢は常に3以下
- 専門用語を使わない
- 判断を迫らない

---

## 7. 技術構成

### 7.1 フロントエンド

- React Native + Expo

### 7.2 データ管理

- ローカルDBのみ
  - SQLite または WatermelonDB

### 7.3 AI連携

- ChatGPT API
- ステートレス利用
- 出力フォーマットはJSON固定

---

## 8. セキュリティ・プライバシー

- ログイン不要
- 個人データは端末内のみ保存
- クラウドDB不使用

---

## 9. 収益化（将来）

- 無料：1日1回提案
- 有料：
  - 無制限生成
  - 国切替
  - 写真入力

---

## 10. やらないこと（明示）

- 週間献立
- 栄養管理・カロリー計算
- SNS / 共有機能
- レシピ写真
- コミュニティ

---

## 11. 成功指標（KPI）

- 1週間以内の再利用率
- 食材登録継続率
- 買い物リスト使用率

---

## 12. 本プロダクトの一文定義

> **「海外の冷蔵庫とスーパーを、今日ちゃんと回すAI」**

---

## 13. アプリ名・ブランド設計

### 13.1 アプリ名

**正式名称（ブランド名）**
- **MAKANAI**

**補足名称（機能説明・サブタイトル）**
- **MAKANAI Flow**

※ アプリアイコンおよび主要UIでは「MAKANAI」を使用し、
※ App Store 表示・説明文・マーケティング文脈では「MAKANAI Flow」を併記する。

---

### 13.2 ネーミング思想（KonMari型）

- 「MAKANAI」は日本語の「賄い」に由来し、
  *限られた食材・環境の中で、効率よく食事を成立させる* という思想を表す。
- 日本発の概念語としてローマ字表記を採用し、
  グローバル市場では英語サブタイトルによって意味を補足する。

---

### 13.3 英語サブタイトル案（用途別）

- *From fridge to plate, anywhere.*
- *Flow your food, wherever you live.*

---

### 13.4 日本語コピー（思想補足）

- 「限られた食材で、ちゃんと回す。」
- 「暮らしの中の食を、無理なく回す。」

---

## 14. Cursor向けUI生成仕様書（画面設計依頼用）

---

## 14.0 画面遷移図（1枚・全体像）

以下は MVP における**画面遷移の全体像**である。Cursor にはこの遷移構造を前提として UI を生成させる。

```
[App Launch]
     |
     v
[Initial Survey]
(Select familiar cuisines)
     |
     v
[Start Screen]
(Choose starting point)
 ┌───────────────┬───────────────┐
 |               |               |
 v               v               |
[Fridge Input]   [Shopping Input]|
 |               |               |
 └───────┬───────┴───────┬───────┘
         v               v
        [Meal Suggestions]
         |        |       |
         |        |       └─── Show another
         |        |
         |        └──────────── This works
         |
         v
[Fridge Management]
         |
         v
     [Start Screen]
```

**遷移ルール**
- 初回起動時のみ `Initial Survey` を表示する
- 2回目以降は `Start Screen` から開始
- `Meal Suggestions` は必ず Fridge / Shopping のいずれかを経由する
- `Fridge Management` は補助画面としてどのタイミングからも戻れる

---

## 14. Cursor向けUI生成仕様書（画面設計依頼用）

本章は **Cursor（AIコーディングツール）に画面UIを生成させるための仕様定義** である。
実装対象は **React Native + Expo** を前提とする。

---

### 14.1 全体設計方針（Cursorへの前提指示）

- 対象：モバイルアプリ（iOS / Android 共通）
- 技術：React Native + Expo
- UI思想：
  - シンプル
  - 迷わせない
  - 情報過多にしない
- 写真・イラストは使わない
- アイコンとテキストのみで構成

---

### 14.2 画面一覧（MVP）

Cursorには以下の画面を作成させる。

1. 初期アンケート画面（国旗選択）
2. 起点選択画面
3. 食材入力画面（冷蔵庫 / スーパー）
4. 食事提案画面
5. 冷蔵庫管理画面

---

### 14.3 画面①：初期アンケート画面

**目的**
- ユーザーが「よく作る国の料理」を直感的に選択する

**UI要件**
- タイトル："What food do you usually cook?"
- 説明文："Select up to 3 cuisines you feel familiar with"
- 国旗アイコンをグリッド表示（複数選択可）
- スキップ不可
- 完了ボタン："Continue"

**保存データ**
```ts
preferredCuisines: string[] // 例: ['JP', 'IT']
```

---

### 14.4 画面②：起点選択画面

**目的**
- 今日の行動起点を選ばせる

**UI要件**
- 大きなボタンを2つ縦並び
  - 🧊 "Check my fridge"
  - 🛒 "Go shopping"
- サブコピー："Start from what you have or where you go"

---

### 14.5 画面③：食材入力画面

**目的**
- 冷蔵庫またはスーパー起点で食材を入力する

**UI要件**
- チェックリスト形式
- よく使う食材を上部に表示
- テキスト検索対応
- 写真入力ボタンは非表示（将来拡張）

---

### 14.6 画面④：食事提案画面

**目的**
- 今日〜明日成立する食事案を提示

**UI要件**
- 最大3カード表示
- 各カードに以下を表示
  - タイトル
  - 使用食材
  - 不足食材
  - 手間レベル（Low / Medium / High）
- CTA："This works" / "Show another"

---

### 14.7 画面⑤：冷蔵庫管理画面

**目的**
- 現在の食材を一覧で確認・整理

**UI要件**
- 食材名 + 優先度カラー表示
- スワイプで削除
- 並び替え：優先度順

---

### 14.8 Cursorへの指示テンプレ（そのまま貼れる）

```text
You are building a React Native app with Expo.
Implement screens exactly as specified.
IMPORTANT:
- One screen = one job (do not merge multiple steps into a single screen).
- Follow the navigation flow in section 14.0.
- Keep UI minimal (no decorative images).
- Use Japanese UI copy for now (localization can be added later).
- Use React Navigation. Create typed routes.
```

---

※ 本章は Cursor による UI 自動生成を前提としており、
デザインの正確さよりも「構造と遷移の正しさ」を優先する。

---

## 14.9 UIをもっと分かりやすくするための改訂指示（重要）

以下の改訂は、実装画面が「1画面に情報を詰め込みすぎる」問題を防ぐための必須指示である。

### 14.9.1 画面分割ルール

- `Start Screen` に **食材入力欄・制約設定・チップ一覧を置かない**
- `Fridge Management` に **スーパー起点メモ（国・都市/メモ入力）を置かない**
- 食材入力と制約入力は同じ画面に置いてよいが、**折りたたみ（Advanced）**に入れる

### 14.9.2 改訂後の画面責務（MVP）

1) **Start Screen（起点選択）**
- 大ボタン2つのみ：
  - 🧊 冷蔵庫から始める
  - 🛒 スーパーから始める
- 補助：直近の選択を小さく表示（任意）

2) **Ingredient Input（食材入力）**
- 画面上部に現在モードを明示：
  - 冷蔵庫モード / スーパー購入モード
- 入力は「検索＋チップ追加」中心
- テキスト欄は補助（カンマ入力可）
- 下部固定CTA：**「提案を見る」**

3) **Constraints（制約）**
- `Ingredient Input` 画面内で **折りたたみ/ボトムシート**として提供
- 露出は最小：
  - 作る気力（低/普通/高）
  - 慣れた国（初期アンケートで選択した国がデフォルト）
  - 慣れ度バランス（現地寄せ/どちらでも/慣れた味寄せ）

4) **Meal Suggestions（提案）**
- 3カードまで
- 各カードは「タイトル→使う→足りない→手間→作り方（折りたたみ）」
- CTA：
  - これでいく（保存して冷蔵庫へ反映）
  - 別案

5) **Fridge Management（冷蔵庫）**
- 冷蔵庫アイテム一覧に責務を限定
- 追加は右上＋ボタン（購入日と優先度）
- スワイプ削除

6) **Shopping Notes / Location（スーパー情報）**
- 冷蔵庫画面から分離し、設定 or 別タブ/別画面にする
- 国・都市は自動取得（編集可）
- メモは「揃いやすいブランド/食材」を短く保存

### 14.9.3 文言の簡略化（例）

- 「今日〜数日を成立させる」→ 画面タイトルは短く **「今日どうする？」**
- 「食材入力（チェックリスト/テキスト）」→ **「食材を追加」**
- 「現地料理OK」→ **「現地でもOK」**
- 「慣れた国」→ **「慣れた味」**（国旗で表示）


